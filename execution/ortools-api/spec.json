{
    "$schema": "./dsl.schema.json",
    "sets": {
        "employees": [
            "P1",
            "P2",
            "P3",
            "P4",
            "P5",
            "P6",
            "P7",
            "P8",
            "P9",
            "P10"
        ],
        "days": [
            "2026-03-02",
            "2026-03-03",
            "2026-03-04",
            "2026-03-05",
            "2026-03-06",
            "2026-03-07",
            "2026-03-08"
        ],
        "shifts": [
            "M",
            "S",
            "OFF"
        ],
        "sites": [
            "SITE_A"
        ]
    },
    "shifts": {
        "M": {
            "start": "07:00",
            "end": "15:00",
            "minutes": 480,
            "is_work": true
        },
        "S": {
            "start": "15:00",
            "end": "23:00",
            "minutes": 480,
            "is_work": true
        },
        "OFF": {
            "start": "00:00",
            "end": "00:00",
            "minutes": 0,
            "is_work": false
        }
    },
    "employees": {
        "P1": {
            "skills": [
                "certified"
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P2": {
            "skills": [
                "certified"
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P3": {
            "skills": [
                "certified"
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P4": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P5": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P6": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P7": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P8": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P9": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        },
        "P10": {
            "skills": [
            ],
            "roles": [
                "cleaner"
            ],
            "site_home": "SITE_A",
            "contract": {
                "type": "full_time"
            }
        }
    },
    "demand": [
        {
            "day": "2026-03-02",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-02",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-03",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-03",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-04",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-04",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-05",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-05",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-06",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-06",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-07",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-07",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-08",
            "site": "SITE_A",
            "shift": "M",
            "min": 3,
            "max": 3,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        },
        {
            "day": "2026-03-08",
            "site": "SITE_A",
            "shift": "S",
            "min": 2,
            "max": 2,
            "requirements": {
                "skills_min": [
                    {
                        "skill": "certified",
                        "min": 1
                    }
                ]
            }
        }
    ],
    "constraints": [
        {
            "id": "C1",
            "type": "hard",
            "kind": "exactly_one_assignment_per_day",
            "scope": {
                "employees": "ALL"
            },
            "data": {
                "shifts": [
                    "M",
                    "S",
                    "OFF"
                ]
            }
        },
        {
            "id": "C2",
            "type": "hard",
            "kind": "forbid_shift_sequences",
            "scope": {
                "employees": "ALL"
            },
            "data": {
                "forbidden_pairs": [
                    {
                        "prev_shift": "S",
                        "next_shift": "M"
                    }
                ]
            }
        },
        {
            "id": "C3",
            "type": "hard",
            "kind": "max_shifts_in_window",
            "scope": {
                "employees": "ALL"
            },
            "data": {
                "window_days": 7,
                "shifts": [
                    "M",
                    "S"
                ],
                "max": 5,
                "mode": "rolling"
            }
        },
        {
            "id": "S1",
            "type": "soft",
            "kind": "penalize_work_on_days",
            "scope": {
                "employees": [
                    "P10"
                ]
            },
            "data": {
                "days": [
                    "2026-03-07",
                    "2026-03-08"
                ],
                "working_shifts": [
                    "M",
                    "S"
                ]
            },
            "penalty": {
                "weight": 3
            }
        },
        {
            "id": "S2",
            "type": "soft",
            "kind": "fair_distribution",
            "scope": {
                "employees": "ALL"
            },
            "data": {
                "measure": "count",
                "shifts": [
                    "S"
                ],
                "window_days": 7,
                "target": "auto_mean",
                "penalize": "absolute_deviation"
            },
            "penalty": {
                "weight": 5
            }
        }
    ],
    "objective": {
        "mode": "minimize",
        "terms": [
            {
                "kind": "soft_penalties_total",
                "weight": 1
            }
        ]
    }
}